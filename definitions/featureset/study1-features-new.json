{
  "url": "https://datatools4heart.eu/feature-sets/study1_features_new",
  "name": "study1_features_new",
  "title": "Dataset for DataTools4Heart project clinical study 1",
  "description": "Dataset for DataTools4Heart project clinical study 1",
  "version": "0.1",
  "date": "2023-01-26",
  "fhirVersion": "4.0.1",
  "publisher": "DT4H WP2 Team (SRDC Corp.)",
  "referenceTimePoints": {
    "method": "feature-group",
    "useEndTime": true
  },
  "featureGroup": [
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/encounters",
      "feature": [
        {
          "name": "encounterClass",
          "description": "Type of encounter (emergency, impatient, outpatient, etc)"
        },
        {
          "name": "admissionYear",
          "description": "Year of admission to hospital"
        },
        {
          "name": "primaryReasonCode",
          "description": "ICD 10 code of the primary reason for the encounter"
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/patient_demographics",
      "feature": [
        {
          "name": "gender",
          "description": "Gender of the patient"
        },
        {
          "name": "age",
          "description": "Age of the patient at reference point",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(birthDate, %referenceTimePoint, 'years')",
            "dataType": "integer"
          }
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/vital_signs",
      "pivot": {
        "name": "code",
        "description": "Vital signs collected in an encounter",
        "values": [
          {
            "name": "weight",
            "value": "29463-7"
          },
          {
            "name": "height",
            "value": "8302-2"
          },
          {
            "name": "systolicBp",
            "value": "8480-6"
          },
          {
            "name": "diastolicBp",
            "value": "8462-4"
          },
          {
            "name": "heartRate",
            "value": "8867-4"
          },
          {
            "name": "oxygenSaturation",
            "value": "2708-6"
          }
        ]
      },
      "feature": [
        {
          "name": "value",
          "description": "Value of the vital sign",
          "temporalAgg": [
            {
              "aggOp": ["first", "last", "avg", "min", "max", "stddev"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/lab_results",
      "pivot": {
        "name": "code",
        "description": "Important lab results to be evaluated features",
        "values": [
          {
            "name": "hemoglobin",
            "value": "718-7"
          },
          {
            "name": "ferritin",
            "value": "2276-4"
          },
          {
            "name": "tfs",
            "value": "2502-3"
          },
          {
            "name": "ntProBnp",
            "value": "33762-6"
          },
          {
            "name": "bnp",
            "value": "30934-4"
          },
          {
            "name": "crpHs",
            "value": "1988-5"
          },
          {
            "name": "crpNonHs",
            "value": "30522-7"
          },
          {
            "name": "tropIHs",
            "value": "89579-7"
          },
          {
            "name": "tropInHs",
            "value": "10839-9"
          },
          {
            "name": "tropTHs",
            "value": "67151-1"
          },
          {
            "name": "tropTnHs",
            "value": "6598-7"
          },
          {
            "name": "triGly",
            "value": "14927-8"
          },
          {
            "name": "cholTot",
            "value": "14647-2"
          },
          {
            "name": "hdl",
            "value": "14646-4"
          },
          {
            "name": "ldl",
            "value": "22748-8"
          },
          {
            "name": "potassium",
            "value": "2823-3"
          },
          {
            "name": "sodium",
            "value": "2951-2"
          },
          {
            "name": "creatBS",
            "value": "2160-0"
          },
          {
            "name": "creatUS",
            "value": "2161-8"
          },
          {
            "name": "albuminBS",
            "value": "1751-7"
          },
          {
            "name": "albuminUS",
            "value": "1754-1"
          },
          {
            "name": "eGFR",
            "value": "69405-9"
          },
          {
            "name": "bun",
            "value": "14937-7"
          },
          {
            "name": "acr",
            "value": "32294-1"
          },
          {
            "name": "hba1c%",
            "value": "4548-4"
          },
          {
            "name": "hba1c",
            "value": "41995-2"
          }
        ]
      },
      "feature": [
        {
          "name": "value",
          "description": "Value of the lab result",
          "temporalAgg": [
            {
              "aggOp": ["first", "last", "avg", "min", "max", "stddev"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/symptoms",
      "pivot": {
        "name": "code",
        "description": "Symptoms to be evaluated as features",
        "values": [
          {
            "name": "Ankle swelling",
            "value": "267039000"
          },
          {
            "name": "Ascites",
            "value": "389026000"
          },
          {
            "name": "Breathlessness",
            "value": "267036007"
          },
          {
            "name": "Cardiac murmur",
            "value": "59495006"
          },
          {
            "name": "Chest pain",
            "value": "29857009"
          },
          {
            "name": "Cheyne-stokes respiration",
            "value": "90480005"
          },
          {
            "name": "Depression",
            "value": "35489007"
          },
          {
            "name": "Dizziness",
            "value": "404640003"
          },
          {
            "name": "Elevated jugular venous pressure",
            "value": "22447003"
          },
          {
            "name": "Fatigue",
            "value": "84229001"
          },
          {
            "name": "Hepatojugular reflux",
            "value": "72196001"
          },
          {
            "name": "Hepatomegaly",
            "value": "80515008"
          },
          {
            "name": "Intermittent claudication",
            "value": "63491006"
          },
          {
            "name": "Irregular pulse",
            "value": "361137007"
          },
          {
            "name": "Loss of appetite",
            "value": "79890006"
          },
          {
            "name": "Nocturnal cough",
            "value": "161947006"
          },
          {
            "name": "Oliguria",
            "value": "83128009"
          },
          {
            "name": "Orthopnoea",
            "value": "62744007"
          },
          {
            "name": "Palpitations",
            "value": "80313002"
          },
          {
            "name": "Paroxysmal nocturnal dyspnea",
            "value": "55442000"
          },
          {
            "name": "Peripheral edema",
            "value": "271809000"
          },
          {
            "name": "Pleural effusion",
            "value": "60046008"
          },
          {
            "name": "Pulmonary crepitations",
            "value": "48409008"
          },
          {
            "name": "Reduced exercise tolerance",
            "value": "267044007"
          },
          {
            "name": "Syncope",
            "value": "272030005"
          },
          {
            "name": "Tachycardia",
            "value": "3424008"
          },
          {
            "name": "Tachypnoea",
            "value": "271823003"
          },
          {
            "name": "Third heart sound",
            "value": "1285004"
          },
          {
            "name": "Weight gain",
            "value": "8943002"
          },
          {
            "name": "Weight loss",
            "value": "89362005"
          }
        ]
      },
      "feature": [
        {
          "name": "display",
          "description": "Whether the symptom is observed or not",
          "valueExpr": {
            "fhirPath": "code.exists()",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/echocardiographs",
      "feature": [
        {
          "name": "lvef",
          "description": "Value of left ventricular ejection fraction"
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/electrocardiographs",
      "feature": [
        {
          "name": "ecg_qrs_duration",
          "description": "Duration of QRS wave"
        },
        {
          "name": "ecg_qrs_axis",
          "description": "Axis of QRS wave"
        },
        {
          "name": "ecg_qt_duration_corrected",
          "description": "Duration of QT wave corrected"
        },
        {
          "name": "ecg_st",
          "description": "ST-elevation"
        },
        {
          "name": "ecg_ischemia_without_st",
          "description": "Ischemia without st-elevation"
        },
        {
          "name": "ecg_type_of_rhythm",
          "description": "Type of rhythm"
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/smoking_status",
      "feature": [
        {
          "name": "smoker",
          "description": "Whether the patient is smoking currently. We check the last smoking status record and expect that it does not have an end date indicating that the patient is a current smoker",
          "valueExpr": {
            "fhirPath": "startTime.exists() and endTime.exists().not()",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": [
                "last"
              ]
            }
          ]
        },
        {
          "name": "totalSmokingDuration",
          "description": "Total duration of smoking in days.",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(startTime, iif(endTime.exists(), (endTime | %referenceTimePoint).min(), %referenceTimePoint), 'days').toInteger()",
            "dataType": "integer"
          },
          "temporalAgg": [
            {
              "aggOp": [
                "sum"
              ]
            }
          ]
        },
        {
          "name": "startTime",
          "description": "Total number of smoking periods.",
          "temporalAgg": [
            {
              "aggOp": ["count"]
            }
          ]
        },
        {
          "name": "formerSmoker",
          "description": "Whether the patient smoked within 1 year prior to the admission.",
          "valueExpr": {
            "fhirPath": "endTime.exists() and utl:getPeriod(startTime, %referenceTimePoint, 'days').toInteger() > 365",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": [
                "any"
              ]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/nyha",
      "feature": [
        {
          "name": "value",
          "description": "New York Heart Assessment value"
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/hyperkalemia_severity",
      "feature": [
        {
          "name": "categorizedValue",
          "description": "Severity of hyperkalemia"
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/ckd_severity",
      "feature": [
        {
          "name": "categorizedValue",
          "description": "Severity of chronic kidney disease"
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/conditions",
      "filter": {
        "name": "heartFailure",
        "fhirPath": "icd10Code.startsWith('I50') or icd10Code.startsWith('I11.0') or icd10Code.startsWith('I13.0') or icd10Code.startsWith('I13.2') or icd10Code.startsWith('I26.0') or icd10Code.startsWith('I09.81') or icd10Code.startsWith('I97.13')"
      },
      "feature": [
        {
          "name": "earliest",
          "description": "ICD code representing the heart failure diagnosis observed for the first time.",
          "valueExpr": {
            "fhirPath": "icd10Code",
            "dataType": "code"
          },
          "temporalAgg": [
            {
              "aggOp": ["first"]
            }
          ]
        },
        {
          "name": "timeFromEarliest",
          "description": "Time elapsed (in months) since heart failure is observed for the first time until the reference time point.",
          "valueExpr": {
            "fhirPath": "utl:getPeriod(onsetDate, %referenceTimePoint,'mo').toInteger()",
            "dataType": "integer"
          },
          "temporalAgg": [
            {
              "aggOp": ["first"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/conditions",
      "feature": [
        {
          "name": "ap",
          "description": "Whether the patient has angina pectoris in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I20')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "af",
          "description": "Whether the patient has atrial fibrillation in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I48')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "cm",
          "description": "Whether the patient has cardiomyopathy in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I42') or icd10Code.startsWith('I43')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "dysl",
          "description": "Whether the patient has dyslipidemia in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('E78')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hf",
          "description": "Whether the patient has heart failure in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I50') or icd10Code.startsWith('I11.0') or icd10Code.startsWith('I13.0') or icd10Code.startsWith('I13.2') or icd10Code.startsWith('I26.0') or icd10Code.startsWith('I09.81') or icd10Code.startsWith('I97.13')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hyp",
          "description": "Whether the patient has hypertension in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I10') or icd10Code.startsWith('I11.0') or icd10Code.startsWith('I12') or icd10Code.startsWith('I13') or icd10Code.startsWith('I15') or icd10Code.startsWith('I16')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "ihd",
          "description": "Whether the patient has ischemic heart disease in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I20') or icd10Code.startsWith('I21') or icd10Code.startsWith('I22') or icd10Code.startsWith('I23') or icd10Code.startsWith('I24') or icd10Code.startsWith('I25')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "mi",
          "description": "Whether the patient has myocardial infarction in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I21') or icd10Code.startsWith('I22')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "pad",
          "description": "Whether the patient has peripheral artery disease in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I73') or icd10Code.startsWith('I70') or icd10Code.startsWith('I71') or icd10Code.startsWith('I72') or icd10Code.startsWith('I74') or icd10Code.startsWith('I75') or icd10Code.startsWith('I77') or icd10Code.startsWith('I78') or icd10Code.startsWith('I79')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "stroke",
          "description": "Whether the patient has stroke in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('I60') or icd10Code.startsWith('I61') or icd10Code.startsWith('I62') or icd10Code.startsWith('I63') or icd10Code.startsWith('I64')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "tia",
          "description": "Whether the patient has transient ischemic attack in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('G45.8') or icd10Code.startsWith('G45.9') or icd10Code.startsWith('I63.9')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "vd",
          "description": "Whether the patient has valvular disease in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('A52.0') or icd10Code.startsWith('I05') or icd10Code.startsWith('I06') or icd10Code.startsWith('I07') or icd10Code.startsWith('I08') or icd10Code.startsWith('I09.1') or icd10Code.startsWith('I09.8') or icd10Code.startsWith('I34') or icd10Code.startsWith('I35') or icd10Code.startsWith('I36') or icd10Code.startsWith('I37') or icd10Code.startsWith('I38') or icd10Code.startsWith('I39') or icd10Code.startsWith('Q23.0') or icd10Code.startsWith('Q23.1') or icd10Code.startsWith('Q23.2') or icd10Code.startsWith('Q23.3') or icd10Code.startsWith('Z95.2') or icd10Code.startsWith('Z95.3') or icd10Code.startsWith('Z95.4')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "revasc",
          "description": "Whether the patient has revascularized CABG, PCI in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('Z95.5')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "devices",
          "description": "Whether the patient has cardiac and vascular implants and grafts in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('Z95.0') or icd10Code.startsWith('Z95.8') or icd10Code.startsWith('Z95.0') or icd10Code.startsWith('Z95.8')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "aidshiv",
          "description": "Whether the patient has AIDS or HIV in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('B20') or icd10Code.startsWith('B21') or icd10Code.startsWith('B22') or icd10Code.startsWith('B23') or icd10Code.startsWith('B24')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "copd",
          "description": "Whether the patient has COPD in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('J40') or icd10Code.startsWith('J41') or icd10Code.startsWith('J42') or icd10Code.startsWith('J43') or icd10Code.startsWith('J44')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "diabetes",
          "description": "Whether the patient has diabetes mellitus in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('E10') or icd10Code.startsWith('E11') or icd10Code.startsWith('E12') or icd10Code.startsWith('E13') or icd10Code.startsWith('E14')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "dem",
          "description": "Whether the patient has dementia in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('F00') or icd10Code.startsWith('F01') or icd10Code.startsWith('F02') or icd10Code.startsWith('F03') or icd10Code.startsWith('F05.1') or icd10Code.startsWith('G30') or icd10Code.startsWith('G31.1')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "dep",
          "description": "Whether the patient has depression in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('F20.4') or icd10Code.startsWith('F31.3') or icd10Code.startsWith('F31.4') or icd10Code.startsWith('F31.5') or icd10Code.startsWith('F32') or icd10Code.startsWith('F33') or icd10Code.startsWith('F34.1') or icd10Code.startsWith('F41.2') or icd10Code.startsWith('F43.2')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "dia",
          "description": "Whether the patient has dialysis in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('Z49.01') or icd10Code.startsWith('Z49.02') or icd10Code.startsWith('Z46.6') or icd10Code.startsWith('Z99.2') or icd10Code.startsWith('Z94.0')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hthyroid",
          "description": "Whether the patient has hyperthyroidism in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('E00') or icd10Code.startsWith('E01') or icd10Code.startsWith('E02') or icd10Code.startsWith('E03') or icd10Code.startsWith('E04')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "ibd",
          "description": "Whether the patient has inflammable bowel disease in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('K50') or icd10Code.startsWith('K51') or icd10Code.startsWith('K52')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "ld",
          "description": "Whether the patient has liver disease in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('B18') or icd10Code.startsWith('I85') or icd10Code.startsWith('I86.4') or icd10Code.startsWith('I98.2') or icd10Code.startsWith('K70') or icd10Code.startsWith('K71.1') or icd10Code.startsWith('K71.3') or icd10Code.startsWith('K71.4') or icd10Code.startsWith('K71.5') or icd10Code.startsWith('K71.7')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "mc",
          "description": "Whether the patient has malignant cancer in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('C0') or icd10Code.startsWith('C1') or icd10Code.startsWith('C20') or icd10Code.startsWith('C21') or icd10Code.startsWith('C22') or icd10Code.startsWith('C23') or icd10Code.startsWith('C24') or icd10Code.startsWith('C25') or icd10Code.startsWith('C26') or icd10Code.startsWith('C30') or icd10Code.startsWith('C31') or icd10Code.startsWith('C32') or icd10Code.startsWith('C33') or icd10Code.startsWith('C34') or icd10Code.startsWith('C37') or icd10Code.startsWith('C38') or icd10Code.startsWith('C39') or icd10Code.startsWith('C40') or icd10Code.startsWith('C41') or icd10Code.startsWith('C43') or icd10Code.startsWith('C45') or icd10Code.startsWith('C46') or icd10Code.startsWith('C47') or icd10Code.startsWith('C48') or icd10Code.startsWith('C49') or (icd10Code.startsWith('C5') and icd10Code.startsWith('C59').not()) or icd10Code.startsWith('C6') or (icd10Code.startsWith('C7') and icd10Code.startsWith('C77').not() and icd10Code.startsWith('C78').not() and icd10Code.startsWith('C79').not())",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "osa",
          "description": "Whether the patient has obstructive sleep apnea in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('G47.3')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "rd",
          "description": "Whether the patient has rheumatic disease in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('M05') or icd10Code.startsWith('M06') or icd10Code.startsWith('M31.5') or icd10Code.startsWith('M32') or icd10Code.startsWith('M33') or icd10Code.startsWith('M34') or icd10Code.startsWith('M35.1') or icd10Code.startsWith('M35.3') or icd10Code.startsWith('M36.0')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "ckd_chronic",
          "description": "Whether the patient has renal disease chronic in their clinical history prior to the date of the data point (i.e. the reference time point)",
          "valueExpr": {
            "fhirPath": "icd10Code.startsWith('N18') or icd10Code.startsWith('N19')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/medications",
      "pivot": {
        "name": "therapy",
        "description": "Categories of medication therapy for this use case",
        "values": [
          {
            "name": "rasi",
            "description": "Renin–angiotensin system inhibitor",
            "value": "rasi"
          },
          {
            "name": "arni",
            "description": "Angiotensin receptor-neprilysin inhibitor (ARNi)",
            "value": "arni"
          },
          {
            "name": "acei",
            "description": "Angiotensin-converting enzyme (ACE)-inhibitors",
            "value": "acei"
          },
          {
            "name": "arb",
            "description": "Angiotensin receptor blocker (ARB) ",
            "value": "arb"
          },
          {
            "name": "mra",
            "description": "Mineralcorticoid receptor antagonist",
            "value": "mra"
          },
          {
            "name": "diuretics",
            "description": "Diuretics",
            "value": "diuretics"
          },
          {
            "name": "diuretics_loop",
            "description": "Loop diuretics",
            "value": "diuretics_loop"
          },
          {
            "name": "anti_coag",
            "description": "Anticoagulant agents",
            "value": "anti_coag"
          },
          {
            "name": "anti_plat",
            "description": "Antiplatelet agents",
            "value": "anti_plat"
          },
          {
            "name": "thrombolytic",
            "description": "Thrombolytic drugs/fibrinolytics",
            "value": "thrombolytic"
          },
          {
            "name": "bb",
            "description": "beta blockers",
            "value": "bb"
          },
          {
            "name": "ccb",
            "description": "Calcium channel blockers",
            "value": "ccb"
          },
          {
            "name": "digitalis",
            "description": "Digitalis glycosides",
            "value": "digitalis"
          },
          {
            "name": "antiarrhytmic",
            "description": "Anti-arrhythmic drugs",
            "value": "antiarrhytmic"
          },
          {
            "name": "inotropes",
            "description": "Inotropes",
            "value": "inotropes"
          },
          {
            "name": "vasodil",
            "description": "Casodilators",
            "value": "vasodil"
          },
          {
            "name": "platelet",
            "description": "Platelets",
            "value": "platelet"
          },
          {
            "name": "ll",
            "description": "Lipid lowering agents",
            "value": "ll"
          },
          {
            "name": "ivabradine",
            "description": "Ivabradine",
            "value": "ivabradine"
          },
          {
            "name": "potassium_binders",
            "description": "Potassium binders",
            "value": "potassium_binders"
          },
          {
            "name": "insulins",
            "description": "Insulins and analogs",
            "value": "insulins"
          },
          {
            "name": "oral_antidiabetic",
            "description": "Oral antidiabetics",
            "value": "oral_antidiabetic"
          },
          {
            "name": "ari",
            "description": "Drugs to prevent nerve damage in diabetes",
            "value": "ari"
          },
          {
            "name": "rdoad",
            "description": "Respiratory drugs for obstructive airway diseases, inhalants",
            "value": "rdoad"
          },
          {
            "name": "rdoad_syst",
            "description": "Respiratory drugs for obstructive airway diseases, systemic use",
            "value": "rdoad_syst"
          },
          {
            "name": "cortico_syst",
            "description": "Corticosteroids systemic",
            "value": "cortico_syst"
          },
          {
            "name": "antiinfl",
            "description": "anti-inflammatory drugs",
            "value": "antiinfl"
          }
        ]
      },
      "feature": [
        {
          "name": "used",
          "description": "Whether this medication therapy is given during hospital stay",
          "valueExpr": {
            "fhirPath": "medicationCode.exists()",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/encounters",
      "join": {
        "type": "future"
      },
      "feature": [
        {
          "name": "hosp_for_heart_failure",
          "description": "Whether the patient is hospitalized because of heart failure after the reference time point.",
          "valueExpr": {
            "fhirPath": "primaryReasonCode.startsWith('I50') or primaryReasonCode.startsWith('I11.0') or primaryReasonCode.startsWith('I13.0') or primaryReasonCode.startsWith('I13.2') or primaryReasonCode.startsWith('I26.0')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hosp_for_CV_disease",
          "description": "Whether the patient is hospitalized because of any cardiovascular condition after the reference time point.",
          "valueExpr": {
            "fhirPath": "primaryReasonCode.startsWith('I') or primaryReasonCode.startsWith('G45') or primaryReasonCode.startsWith('J81') or primaryReasonCode.startsWith('K76.1') or primaryReasonCode.startsWith('R57')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hosp_for_non_cv_disease",
          "description": "Whether the patient is hospitalized because of any non-cardiovascular condition after the reference time point.",
          "valueExpr": {
            "fhirPath": "(primaryReasonCode.startsWith('I') or primaryReasonCode.startsWith('G45') or primaryReasonCode.startsWith('J81') or primaryReasonCode.startsWith('K76.1') or primaryReasonCode.startsWith('R57')).not()",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "hosp_for_renal_complications",
          "description": "Whether the patient is hospitalized because of any renal complication after the reference time point.",
          "valueExpr": {
            "fhirPath": "primaryReasonCode.startsWith('N18') or primaryReasonCode.startsWith('N19')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        }
      ]
    },
    {
      "reference": "https://datatools4heart.eu/feature-groups/study1/cause_of_death",
      "join": {
        "type": "future"
      },
      "feature": [
        {
          "name": "isCardivascular",
          "description": "Whether the patient dies because of any cardiovascular condition after the reference time point.",
          "valueExpr": {
            "fhirPath": "causeOfDeath.startsWith('I') or causeOfDeath.startsWith('G45') or causeOfDeath.startsWith('J81') or causeOfDeath.startsWith('K76.1') or causeOfDeath.startsWith('R57')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "isRenal",
          "description": "Whether the patient dies because of any renal complication after the reference time point.",
          "valueExpr": {
            "fhirPath": "causeOfDeath.startsWith('N18') or causeOfDeath.startsWith('N19')",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        },
        {
          "name": "isNonRenalAndNonCV",
          "description": "Whether the patient dies because of any non-cardiovascular and non-renal condition after the reference time point.",
          "valueExpr": {
            "fhirPath": "(causeOfDeath.startsWith('N18') or causeOfDeath.startsWith('N19')).not() and (causeOfDeath.startsWith('I') or causeOfDeath.startsWith('G45') or causeOfDeath.startsWith('J81') or causeOfDeath.startsWith('K76.1') or causeOfDeath.startsWith('R57')).not()",
            "dataType": "boolean"
          },
          "temporalAgg": [
            {
              "windowPeriod": "d",
              "windowSize": 7,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "mo",
              "windowSize": 6,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 1,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 3,
              "aggOp": ["any"]
            },{
              "windowPeriod": "a",
              "windowSize": 5,
              "aggOp": ["any"]
            }
          ]
        }
      ]
    }
  ]
}
