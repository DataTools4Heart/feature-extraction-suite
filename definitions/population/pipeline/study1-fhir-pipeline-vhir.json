{
  "id": "study1_cohort_vhir",
  "resourceType": "PopulationPipeline",
  "url": "https://datatools4heart.eu/cohorts/study1-vhir",
  "name": "study1_cohort_vhir",
  "title": "Hospitalized Patients with Primary Diagnosis of Heart Failure",
  "description": "This cohort includes patients hospitalized with a primary discharge diagnosis of heart failure. The primary discharge diagnosis refers to the main clinical condition responsible for the hospital admission.",
  "version": "1.1",
  "date": "2025-07-24",
  "status": "active",
  "publisher": "DataTools4Heart/AI4HF Team (SRDC Corp.)",
  "interface": "fhir",
  "supportedVersions": [
    "R5"
  ],
  "entry": [
    {
      "name": "patientEncounter",
      "description": "Captures hospital encounters when a patient is admitted for care.",
      "resourceType": "Encounter",
      "entityLink": [
        {
          "entity": "pid",
          "entityType": "Patient",
          "searchParam": "patient",
          "path": "subject.reference"
        },
        {
          "entity": "encounterId",
          "entityType": "Encounter",
          "searchParam": "_id",
          "path": "id"
        }
      ],
      "eventTime": "Encounter.actualPeriod.start"
    }
  ],
  "eligibility": [
    {
      "name": "adultsWithHeartFailure",
      "description": "Select all Patient resources who has a HF Condition resource categorized as encounter-diagnosis (to indicate the primary admit reason). Exclude Patients who are younger than 18 years old at the time of admission.",
      "criteria": [
        {
          "resourceType": "Patient",
          "category": "exclusion",
          "entityLink": [
            {
              "entity": "pid",
              "entityType": "Patient",
              "searchParam": "_id",
              "path": "id"
            }
          ],
          "timeConstraint": {
            "path": "birthDate.toDate()",
            "start": "(%eligibilityEventTime - 18 years)"
          }
        },
        {
          "resourceType": "Condition",
          "category": "inclusion",
          "query": "?category=encounter-diagnosis&code:below=http://hl7.org/fhir/sid/icd-10|I50,http://hl7.org/fhir/sid/icd-10|I11.0,http://hl7.org/fhir/sid/icd-10|I13.0,http://hl7.org/fhir/sid/icd-10|I13.2,http://hl7.org/fhir/sid/icd-10|I26.0,http://hl7.org/fhir/sid/icd-10|I09.81,http://hl7.org/fhir/sid/icd-10|I97.13,http://hl7.org/fhir/sid/icd-10|I25.5",
          "entityLink": [
            {
              "entity": "encounterId",
              "entityType": "Encounter",
              "searchParam": "encounter",
              "path": "encounter.reference"
            },
            {
              "entity": "pid",
              "entityType": "Patient",
              "searchParam": "patient",
              "path": "subject.reference"
            }
          ]
        }
      ]
    },
    {
      "name": "lengthOfStay",
      "description": "Filters encounters where patient was not discharged on the same day of admission",
      "criteria": [
        {
          "resourceType": "Encounter",
          "category": "inclusion",
          "entityLink": [
            {
              "entity": "encounterId",
              "entityType": "Encounter",
              "searchParam": "_id",
              "path": "id"
            }
          ],
          "timeConstraint": {
            "path": "actualPeriod.end.toDate()",
            "start": "(%eligibilityEventTime + 1 day)"
          }
        }
      ]
    }
  ]
}
